;------------------------------------------------------------
; 2-bit CPU Assembly Program
; Computes: k = ((a + c) OR (c - a)) AND b
;------------------------------------------------------------
; Initial values:
;   a = 01 (1)
;   b = 10 (2)
;   c = 11 (3)
;------------------------------------------------------------

00:  sti 1, 0        ; mem[0] = 01 → a = 1
01:  sti 2, 1        ; mem[1] = 10 → b = 2
02:  sti 3, 2        ; mem[2] = 11 → c = 3

;------------------------------------------------------------
; Step 1: d = a + c = 01 + 11 = 100 (wraps to 00)
;------------------------------------------------------------
03:  ld  eax, 0      ; eax = a = 01
04:  ld  ebx, 2      ; ebx = c = 11
05:  add              ; acc = eax + ebx = 00 (0)
06:  st  acc, 3       ; mem[3] = 00 → d = 0

;------------------------------------------------------------
; Step 2: e = c - a = 11 - 01 = 10 (2)
;------------------------------------------------------------
07:  ld  eax, 2      ; eax = c = 11
08:  ld  ebx, 0      ; ebx = a = 01
09:  sub              ; acc = eax - ebx = 10 (2)
0A:  st  acc, 0       ; mem[0] = 10 → e = 2

;------------------------------------------------------------
; Step 3: f = d OR e = 00 OR 10 = 10 (2)
;------------------------------------------------------------
0B:  ld  eax, 3      ; eax = d = 00
0C:  ld  ebx, 0      ; ebx = e = 10
0D:  or               ; acc = eax OR ebx = 10 (2)
0E:  st  acc, 2       ; mem[2] = 10 → f = 2

;------------------------------------------------------------
; Step 4: k = f AND b = 10 AND 10 = 10 (2)
;------------------------------------------------------------
0F:  ld  eax, 2      ; eax = f = 10
10:  ld  ebx, 1      ; ebx = b = 10
11:  and              ; acc = eax AND ebx = 10 (2)
12:  st  acc, 3       ; mem[3] = 10 → k = 2 (final result)

;------------------------------------------------------------
; End program — load result for output
;------------------------------------------------------------
13:  ld  eax, 3      ; eax = mem[3] = k = 10 (2)
14:  halt             ; Stop execution